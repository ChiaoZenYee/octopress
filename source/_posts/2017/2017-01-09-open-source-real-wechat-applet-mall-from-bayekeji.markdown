---
layout: post
title: "巴爷供销社，一个生产级别的微信小应用商城开源实现"
date: 2017-01-09T10:16:50+08:00
comments: true
external-url: 
categories: 
---

今天是微信小应用发布的日子，很高兴巴爷科技（上海）有限公司能作为第一批微信小应用的Rails厂商，能为Rails社区提供一个开源的参考实现。（包括后端）

微信小应用的介绍文章已经很多了，快速的开发体验，iOS／Android不必分别开发俩次都是很大的优点。但同时，腾讯微信也不是上次的公众号发布时的微信了，7亿的用户，近乎100%的中国市场，所以腾讯变的非常非常小心谨慎，所以也不要指望能像原来的公众号，能从腾讯分到近乎免费的流量红利。

微信小程序限制非常之多：微信小程序二维码只能通过扫一扫进入，不能通过图片扫描；微信小程序没有应用商店，只能通过发现，小程序的的搜索功能寻找；更令人发指的是，非合作伙伴的话，还必须搜索全名才行，也就是说，只有腾讯投资的京东，才能搜索“京东”找到“京东购物”，像巴爷科技，搜索“巴爷”是无法得到任何结果的，必须搜索“巴爷供销社”。

微信小应用在开发方面，微信基本保持了和服务号近似的接口，例如微信支付的对接。但也有不同的地方，例如敏感数据的加解密等。另外由于我们开始开发等时间较早，持续到现在，很多API不断发生改变，这也确实给我们的开发造成了一些困扰。

微信小应用递交审核方面，由于我们不是内测的200个名单中的公司，而是作为第二批公测用户，递交审核的周期和苹果差不多，一次审核周期在1～2天，甚至周末也有人审核。但不好的地方在于，拒的话，只会告诉你一个问题，而且一旦发现应用有bug，有和应用说明中没写的功能，超出微信小应用所选分类的功能，都会被拒。所以如果你的应用如果想快速上线，基本很难。审核期间我们在是否需要[ICP证](http://jingyan.baidu.com/article/b87fe19e6f488c5218356890.html)方面被拒了3次，中国的政策很奇怪，理论上只要你有营利性的网上经营行为就必须要ICP证，否则就属于非法经营。但是如果你到电信管理局去申请这个ICP证，办事人员却会以你的公司业务量太小，拒绝你的申请（🐷要养肥了杀？），但好在腾讯在最后一刻，终于在审核上线时，不需要微信小应用递交ICP证了，所以，现在能访问到“巴爷供销社”，还是要感谢腾讯在政府关系方面做出的努力。

{% img /images/2017/bayekeji_mini_program.jpg 扫一扫访问微信小程序 %}

微信小程序的github开源地址：https://github.com/bayetech/wechat_mall_applet

后端基于active_model_serializers的参考实现地址：https://github.com/bayetech/wechat_mall_applet_backend
